{% extends 'base.html' %}
{% load staticfiles %}{% block content %}
{% csrf_token %}
<div id="content" class="clearfix">
<div class="innerWrapper">
    <script>

    </script>
<!--[if IE 6]>
<div class="alert-box error editor">
	<p class="bold">You are using Internet Explorer Version 6 which will not work with administration pages.</p>
	<p>Please upgrade to a modern web browser to use this site.</p>
	<p>Your Test takers can still use Internet explorer 6 however.</p>
	<p>Modern browsers include: <a href="https://www.google.com/intl/en/chrome/browser/">Google Chrome</a> | <a href="http://www.mozilla.org/en-US/firefox/new/">Mozilla Firefox</a> | <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">Microsoft Internet Explorer</a></p>
</div>
<![endif]-->







<div class="generic-overlay">
<div class="generic-overlay-content"></div>
<div class="clearheight30"></div>
</div><div class="col-span-7"><p class="breadcrumb3"><a href="Add new registered user group" class="first"><span>Assign Test Course</span></a><span>Settings</span></p></div><div class="col-span-3"><ul class="menu-sections">
<li class="test"><a href="My tests"><span>Tests</span></a></li>
<li class="group"><a class="sect" href="Group"><span>Groups</span></a></li>
<li class="link"><a class="sect" href="links"><span>Links</span></a></li></ul>
</div><div class="clearheight20"></div><div class="clearheight20"></div>





    <!--upper yags -->
    <br><br>
    <ul class="steps stepbars stepsbars2">
<li class="step-1 "><a href="">Select Course</a></li><li class="step-2 ">Select TEST</li><li class="step-3">ASSIGN</li><li class="step-4 last current">Settings</li>
</ul>




<div class="masthead clearfix">
<div class="col-span-8"><h2 class="test-name name"><a href="" class="graylink">ASSIGN {{ test_name }} to {{ course_name }}</a></h2><h2 class="group-name name"><a href="Add new registered user group" class="graylink"></a></h2></div><div class="col-span-2 ">
<div class="test-settings-summary">
<h3>Results</h3>
<span class="little"><a href="Manage test">View</a></span>
</div>
</div></div><a href="Manage test" class="right btn btn-analytics showTooltipEast" title="Preview taking this Test with these applied Settings.">Preview Test</a> <a class="scroll_setting_div"></a>
<div class="">
<div class="clearheight"></div>

<div class="page editor assign-settings-container">
<form action="tt" method="post" id="monitorchanges">

    <input type="hidden" name="test-name1" value='{{ test_name }}'>
    <input type="hidden" name="course-name1" value='{{ course_name }}'>



<input type="hidden" name="settings_type" value="classtestsettings"><input type="hidden" name="test_id" value="742198"><input type="hidden" name="rg_id" value="308307">
<div class="clearheight"></div>
<h4>Test Access</h4>
<div class="settings-box">
<div class="accordion-toggle scroll_Availability setting-availability closed">
<h3 class="form-field-title">Availability</h3>
<div class="settings-status">Available</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<span class="form-field-title"><strong>Option 1</strong></span><br><br>
<span class="form-field-title no-input">Currently: </span>
<input type="radio"  name="available" checked="checked" value="1"> <label for="showfromon">Available</label>
    <span class="showTooltip tooltip" title="Test will be available to Start">Tip</span>
<div class="clearheight5"></div>
<input class="tab" type="radio" name="available" value="0">
 <label for="showfromoff">Unavailable</label><span class="showTooltip tooltip" title="Test will not be available to Start.">Tip</span>
</div>
<hr class="tab">
<span class="form-field-title"><strong>Option 2</strong></span><br><br>
<div class="field-group"><p class="littledark tab">Your time zone: (GMT+05:00) Islamabad, Karachi <span class="showTooltipHTML tooltip" title="Ensure your time zone is correct before setting available dates.&lt;br/&gt;&lt;br/&gt;Edit your time zone via your My Account section.">Tip</span></p><span class="littledark tab">mm/dd/yyyy</span><br>
<label class="form-field-title not-input" for="datepickerfrom">Available from:</label>
 <input type="text" name="show_from_date" id="datepickerfrom" value="" size="15" maxlength="10" class="hasDatepicker">&nbsp;
    <select name="show_from_h">
        <option value="12">12</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option><option value="10">10</option><option value="11">11</option></select>
<select name="show_from_m">
    <option value="00">00</option>
    <option value="05">05</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="20">20</option>
    <option value="25">25</option>
    <option value="30">30</option>
    <option value="35">35</option>
    <option value="40">40</option>
    <option value="45">45</option>
    <option value="50">50</option>
    <option value="55">55</option>
</select>
<select name="show_from_ampm"><option value="am">am</option><option value="pm">pm</option></select><br><label class="form-field-title not-input" for="datepickeruntil">Available until:</label> <input type="text" name="show_until_date" id="datepickeruntil" value="" size="15" maxlength="10" class="hasDatepicker">&nbsp;<select name="show_until_h"><option value="12">12</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option></select>
<select name="show_until_m"><option value="00">00</option><option value="05">05</option><option value="10">10</option><option value="15">15</option><option value="20">20</option><option value="25">25</option><option value="30">30</option><option value="35">35</option><option value="40">40</option><option value="45">45</option><option value="50">50</option><option value="55">55</option></select>
<select name="show_until_ampm"><option value="am">am</option><option value="pm">pm</option></select></div>
<div id="resultandresume" style="display: none;">
<hr>
<div class="field-group">
<input class="tab" type="checkbox" name="show_results_when_unavailable" value="1" id="show_results_when_unavailable">
<label for="show_results_when_unavailable">Show Test &amp; Results When Unavailable</label>
<span class="showTooltipHTML tooltip" title="By default, when Tests are set as &#39;Unavailable&#39; (in Option 1 OR Option 2 above), your Test takers will not see them listed at all on their &#39;My Tests&#39; page.&lt;br/&gt;&lt;br/&gt;Turn this setting on to allow Test takers to view their Completed Test results when this Test is not Available, or see the Test listed and the Date it will become available to take.&lt;br/&gt;&lt;br/&gt;You can come back and change this setting later to completely hide the exam.">Tip</span>
<span class="explain tab padleft30"> (Select "Results Page" options below)</span>
<br>
<input class="tab" type="checkbox" name="can_resume_when_unavailable" value="1" id="can_resume_when_unavailable">
<label for="can_resume_when_unavailable">Can Resume When Unavailable</label>
<span class="showTooltipHTML tooltip" title="Allow Test takers to Resume and Finish their &#39;In Progress&#39; Test after it is no longer available.">Tip</span>
</div>
</div></div>
</div>
<div class="settings-box">
<div class="accordion-toggle scroll_Attempts setting-attempts closed">
<h3 class="form-field-title">Attempts</h3>
<div class="settings-status">Unlimited attempts allowed</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<span class="form-field-title not-input">Attempts:</span>
<input type="radio" name="practice" id="one_attempt" value="0"> <label for="one_attempt">One</label>
<div class="clearheight5"></div>
<input class="tab" type="radio" name="practice" value="1" id="num_attempts"> <input type="text" name="attempts_allowed" size="3" value="" id="num_attempts_count" maxlength="3"> <label for="num_attempts">Multiple (set as 2 or higher)</label>
<div class="clearheight5"></div>
<input class="tab" type="radio" name="practice" checked="checked" id="unlimited_attampts" value="2"><label for="unlimited_attampts">Unlimited</label>
</div>
<div class="clearheight"></div>
</div>
</div>






<div class="clearheight30"></div>
<h4>Taking Test</h4>
<div class="settings-box">
<div class="accordion-toggle scroll_TL setting-time-limit closed">
<h3 class="form-field-title">Time Limit</h3>
<div class="settings-status">No</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<input class="tab" id="tl" type="text" name="time_limit" maxlength="3" size="3" value="0"> <label for="tl">Minutes</label> <span class="showTooltipHTML tooltip" title="Set a time limit for this Test. &lt;br/&gt;Example: 2 hrs = 120 &lt;br/&gt;&lt;br/&gt;Leave blank or set as 0 for no time limit.">Tip</span>
</div>
</div>
</div>

   <div class="settings-box">
<div class="accordion-toggle scroll_TL setting-time-limit closed">
<h3 class="form-field-title">Score</h3>
<div class="settings-status">No</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<input class="tab" id="tl" type="text" name="score" maxlength="3" size="3" value="0"> <label for="tl">marks</label> <span class="showTooltipHTML tooltip" title="">Tip</span>
</div>
</div>
</div>




<div class="settings-box">
<div class="accordion-toggle scroll_resume setting-resume-later closed">
<h3 class="form-field-title">Resume Later</h3>
<div class="settings-status">No</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<input class="tab" type="checkbox" name="save_finish_later" value="1" id="sfl_2"> <label for="sfl_2">Allow save and resume later</label>
<span class=" showTooltip tooltip" title="Allow Test takers to save this Test and come back and finish it at another time. If not set, Test must be finished in one sitting.">Tip</span>
</div>
<div class="clearheight"></div>
</div>
</div>
<div class="clearheight30"></div>
<h4>Test Questions</h4>
<div class="settings-box">
<div class="accordion-toggle scroll_display_pp setting-questions-per-page closed">
<h3 class="form-field-title">Display</h3>
<div class="settings-status">1 Question per page, Hide Question Points</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<span class="form-field-title not-input">Display:</span>
 <select name="questions_displayed_per_page">
     <option value="1" selected="selected">1</option>
     <option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select> Question Per Page <span class="showTooltip tooltip" title="Define the number of Questions that will display on each Test page.">Tip</span> </div>
<div class="field-group">
<span class="form-field-title not-input">Points:</span>
<input type="checkbox" name="show_question_points_during_test" value="1" id="sqpdt">
<label for="sqpdt">Display Points each Question is worth during Test</label>
<span class="showTooltip tooltip" title="Points each Question is worth will be displayed as Question are being taken. Note: If showing Grading Questions (see below), Question points are always displayed with grades. EG: Points: 2 out of 2">Tip</span>
</div>
</div>
</div>
<div class="settings-box">
<div class="accordion-toggle scroll_random setting-random closed">
<h3 class="form-field-title">Randomize</h3>
<div class="settings-status">No</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<input type="checkbox" name="random_q" value="1" id="rq_2" class="tab"> <label for="rq_2">Give Questions in random order <span class="showTooltip tooltip" title="This Site will randomize the order in which the Questions are displayed each time the Test begins.">Tip</span></label>
</div>
</div>
</div>
<div class="settings-box">
<div class="accordion-toggle scroll_answers setting-answers closed">
<h3 class="form-field-title">Answers</h3>
<div class="settings-status">Mandatory, Can change answers</div><div class="caret">&nbsp;</div>
</div>
<div class="accordion-fold">
<div class="field-group">
<span class="form-field-title not-input">Mandatory:</span>
<input type="checkbox" name="must_select_answer" checked="checked" value="1" id="ma_2"> <label for="ma_2">Must answer Questions</label>
<span class=" showTooltip tooltip" title="When turned on, Test takers must answer every Question to continue and complete the Test.">Tip</span><br>
<div class="tab">
<input type="checkbox" name="correct_to_continue" value="1" id="cc_2" class="sub-checkbox"> <label for="cc_2">Must answer correctly to continue</label>
<span class="showTooltip tooltip" title="When turned on, Test takers must answer each Question correctly to continue and complete the Test otherwise Test will be stopped.">Tip</span>
</div>
</div>
<div class="field-group">
<span class="form-field-title not-input">Instant review:</span>
<input type="checkbox" name="test_feedback_q" value="1" id="sfq_">
<label for="sfq_">Question grading and Feedback during Test</label>
<span class="showTooltip tooltip" title="Show corrections after each Question including your custom Feedback if any.">Tip</span>
<div class="tab">

<input class="sub-checkbox" type="checkbox" name="test_feedback_qca" value="1" id="sfqca_">
<label for="sfqca_">Reveal correct answers during Test</label>
<span class="showTooltip tooltip" title="Will indicate the correct answer if a Question is answered incorrectly.">Tip</span><br>
</div>
</div>
<div class="field-group">
<span class="form-field-title not-input">Change answers:</span>
<input type="checkbox" name="allow_click_previous" checked="checked" value="1" id="ab_2">
<label for="ab_2">Allow Test takers to go back during Test</label>
<span class="showTooltip tooltip" title="If &#39;Instant review&#39; above is enabled (as well as this &#39;Change Answers&#39; option), Test takers can review gradings and reattempt Questions during the Test.">Tip</span>
<div class="padleft padtop littledark" id="warning-feedback-and-goback">
<div class="alert-box alert-confirmation editor "><strong>Note:</strong> With <strong>Instant review</strong> and <strong>Change answers</strong> both enabled, users can review gradings and reattempt Questions during the Test to achieve 100%.</div> </div>
</div>
</div>
</div>
<div class="clearheight30"></div>











<div class="clearheight"></div>
<button  id="b1">SAVECHANGES</button>
<p><input type="checkbox" value="1" name="save_as_default" id="save_as_defaults"> <label for="save_as_defaults">Save as my default settings.</label> <span class="showTooltipHTML tooltip" title="Each time you assign a Test, these settings will be preset for you.&lt;br/&gt;&lt;br/&gt;Note: Saving as Default settings will not affect any of your Existing Assigned Settings.">Tip</span></p>
<a class="btn btn-create editSettingsSubmitCheck" href="Add new registered user group">Save changes</a> <a class="btn btn-cancel" href="Manage test">Cancel</a>
</form>
</div>
<div class="aside editor">
 
<div class="clearheight60"></div>
<div class="aside-message assign">
<h4>Remove Test From Group</h4>
<p><strong>Temporarily</strong></p>
<p class="explain"><a href="Add new registered user group" id="tog_change" class="showcont hideme">Learn more</a></p>
<div class="hide" id="dotog_change">
<p class="explain">Hide this Test from this group by editing the availability settings on this page.
<span class="showTooltip tooltip" title="When Tests are hidden, group members cannot take the Test or see their results.">Tip</span></p>
<p class="explain"><a href="Add new registered user group" class="anchor_scroll_Availability">Change availability</a></p>
</div>
<hr>
<p><strong>Permanently</strong></p>
<p class="explain"><a href="Add new registered user group" id="tog_perm" class="showcont hideme">Learn more</a></p>
<div class="hide" id="dotog_perm">
<p class="explain">Remove this Test and its <a href="Manage test">results</a> from this group by unassigning it.
<span class="showTooltip tooltip" title="Any results for the Test in this group will be permanently deleted. You can export Test results from the Results pages first to keep an offline copy. You can re-assign this Test again later if you require.">Tip</span></p>
<p class="explain"><a href="Manage test">Unassign Test</a></p>
</div>
<hr>
<p><strong>Tip</strong></p>
<p class="explain">Each Test can be assigned to multiple Groups or Links with customized settings applied each time.</p>
</div>
</div>
</div>
<div class="clearheight60"></div>
<script type="text/javascript">


$(document).ready(function() {

	$('#monitorchanges input, #monitorchanges select, #monitorchanges textarea').change(function (){
		//alert(0);
		$(this).closest('.settings-box').find('.settings-status').html('Save changes below <span class="showTooltip tooltip" title="Confirm changes for Test settings with the \'Save changes\' button at the bottom of this page.">Tip</span>');
	});

	$('.editSettingsSubmitCheck').click( function(){

		// Email user send check
		if($('#email_student').val() === '1') {

			
			if ($('#email_student_from').val().replace(/ /g, "").length==0){
				alert('Please add a Name in the Email \'From\' field in the Test takers send email settings.');
				return false;
			}
			if ($('#email_student_subject').val().replace(/ /g, "").length==0){
				alert('Please add a subject to the Email \'Subject\' field in the Test takers send email settings.');
				return false;
			}

			if( !$('#email_student_send_manual').is(':checked') && !$('#email_student_send_auto').is(':checked') ){

				alert('Please select the send method for user emails.');
				return false;

			}

			if( $('#email_student_send_auto').is(':checked') ) {

				// check that the auto settings are selected.
				if( !$('#email_student_send_type_auto_on_completion_to_email_queue').is(':checked') && !$('#email_student_send_type_auto_date').is(':checked') ) {

					alert('Please select the Test takers email auto send type.');
					return false;

				} else if( $('#email_student_send_type_auto_date').is(':checked') && $('#email_student_send_date_datepickerfrom').datepicker("getDate") === null ) {

					alert('Please choose a date for sending Test takers emails.');
					return false;

				}

			}

		}


		if ( $('input[name="show_from"]:checked').val() == undefined && ($("#datepickerfrom").val().replace(/ /g, "").length ==0 && $("#datepickeruntil").val().replace(/ /g, "").length ==0) ){
			alert('Please choose the Test Availability.');
			return false;

		} else if ( isNaN( $('input[name="time_limit"]').val() ) ){
			alert('Time limit must be a numeric digit.');
			return false;

		} else if (  $("#datepickerfrom").val().replace(/ /g, "").length > 0 && $("#datepickeruntil").val().replace(/ /g, "").length==0 ) {
			alert('Please choose the end Test Availability date or clear both date fields');
			return false;

		} else if  ( $("#datepickerfrom").val().replace(/ /g, "").length ==0 && $("#datepickeruntil").val().replace(/ /g, "").length>0 ){
			alert('Please choose the start Test Availability date or clear both date fields');
			return false;

		} else if ( !checkHttpLink($('input[name="pass_url"]').val()) || !checkHttpLink($('input[name="fail_url"]').val())){
			alert('Return Links must start with http:// or https://');
			return false;

		} else if (!$('#cert_0').is(':checked') && $('#ct_1').is(':checked') && !passmark_is_set() ) {
			alert('You have selected to only allow your certificate to show when the Test is passed, however, you have not set a pass mark.\n\nCorrect this and try again.');
			return false;
				} else {
			var assign_submit_link = $(this);
			$(this).hide().after('<img src="/img3/icon_loading_circleV3.gif" alt="Loading" class="loadingGif" />');

			IEHack_ShowBbcodeBeforeSubmit();

			$(this).closest("form").submit();
			$('.loadingGif').slideUp(10000);
			setTimeout(function(){
				assign_submit_link.show().after('<p>Page did not submit, please wait another few seconds just in case then try again.</p>');
			},10500);

			return false;
		}

	});



	// START: Instructor email settings

	$(document).on('click', '#er_1', function(){
		$('#instructor_send_message').text('NO').removeClass('green');
	});

	$(document).on('click', '#er_2, #er_3, #er_4', function(){
		$('#instructor_send_message').text('YES').addClass('green');
	});

	// END: Instructor email settings



	// START: Email Student

	$("#email_student_send_date_datepickerfrom").datepicker(  { minDate:'NOW', maxDate: '+3M' } );

	// Display correct send type sections
	if( $('#email_student_send_auto').is(':checked') ) {
		$('#email_student_send_auto_options_section').show();
	}

	if( $('#email_student_send_type_auto_date').is(':checked') ){
		$('#email_student_send_date_section').slideDown();
	}

	$('#email_student_gq').change(function (){
		if ( $(this).is(':checked') == false){
			$('#email_student_sca2_, #email_student_daqin_').removeAttr('checked');
		}
	});

	$('#email_student_sca2_, #email_student_daqin_').change(function (){
		$('#email_student_gq').prop("checked", true);
	});

	$('.email_student_checkbox').on('change', function(){

		var checked = checkedEmailStudentsOn();


		if(checked){
			$('#email_student_results_message').text('YES').addClass('green');
			$('#email_student').val('1');

			// Enable the text inputs
			$('#email_student_from, #email_student_subject, #email_student_send_date_datepickerfrom').attr('disabled', false);
			$('#send_email_details_fields').slideDown();
			$('#turnoff_emailstudents').show();
			$('#from_external_email').show();
		} else {
			disableEmailStudentResultsForms();

		}

	});
	$(document).on('click', '#turnoff_emailstudents_link', function(e){
		e.preventDefault();
		disableEmailStudentResultsForms();
	});

	function checkedEmailStudentsOn(){


		var email_student_checkbox_id_array = ['email_student_ssp',
			'email_student_ssp2',
			'email_student_stf',
			'email_student_gq',
			'email_student_sca2_',
			'email_student_daqin_',
			'email_student_vr_8'];

		for(var i = 0; i < email_student_checkbox_id_array.length; i++){
			if(document.getElementById(email_student_checkbox_id_array[i]).checked){
				return true;
			}
		}

		return false;
	}

	function disableEmailStudentResultsForms(){
		$('#email_student_results_message').text('NO').removeClass('green');
		$('#email_student').val('0');
		$('#email_student_ssp,#email_student_ssp2,#email_student_stf,#email_student_gq,#email_student_sca2_,#email_student_daqin_,#email_student_vr_8').prop('checked', false);

		// Disable the text inputs. Im not clearing the content just in case the admin did not want to disable Test taker emails.
		// The values will not be saved.
		$('#email_student_from, #email_student_subject, #email_student_send_date_datepickerfrom').attr('disabled', true);
		$('#send_email_details_fields').slideUp();
		$('#turnoff_emailstudents').hide();
		$('#from_external_email').hide();
	}


	// Send email options (manual or auto)

	$('#email_student_send_manual, #email_student_send_auto').on('change', function(){

			if( $(this).val() === 'manual' ){

				// Hide sections
				$('#email_student_send_auto_options_section, #email_student_send_date_section').slideUp();

				// Set send auto section radio buttons to unchecked
				//$('#email_student_send_type_auto_on_completion_to_email_queue').removeAttr('checked');

				// Set date to null
				$("#email_student_send_date_datepickerfrom").datepicker('setDate', null);
				$('#email_student_send_type_auto_date').removeAttr('checked');

			} else {

				$('#email_student_send_auto_options_section').slideDown();

			}

	});

	$('#email_student_send_type_auto_on_completion_to_email_queue, #email_student_send_type_auto_date').on('change', function(){

		if( $(this).val() === 'auto' ){

			$("#email_student_send_date_datepickerfrom").datepicker('setDate', null);
			$('#email_student_send_date_section').slideUp();

		} else {
			$('#email_student_send_date_section').slideDown();
		}

	});

	// END: Email Student


    if ( $('input[name="show_from"]:checked').val() == 1 ){
        $('#resultandresume').hide();
    }

	$("#datepickerfrom").datepicker();
	$("#datepickeruntil").datepicker();
	$('[id^="datepicker"]').change(function (){
		$('[id^="showfrom"]').prop('checked',false);
		$('#resultandresume').show();
	});
	$('[id^="showfrom"]').click( function (){
		/* Clear datepicker settings when not using */
		$('[id^="datepicker"]').val('');
        if ($('input[name="show_from"]:checked').val() == 1) {
			$( "#resultandresume" ).slideUp();
        }
        if ($('input[name="show_from"]:checked').val() == 0) {
            $('#resultandresume').slideDown();
        }
	});
	$('#showfromon').click( function (){
		/* Clear settings when always available */
		$('#show_results_when_unavailable').prop("checked", false);
		$('#can_resume_when_unavailable').prop("checked", false);
	});

	$("#datepickeruntil").click(function() {
		if ($("#datepickerfrom").val().replace(/ /g, "").length > 0 && $("#datepickeruntil").val().replace(/ /g, "").length == 0){
			$("#datepickeruntil").datepicker( "setDate" , $("#datepickerfrom").val());
		}
	});
	$('#one_attempt').click( function (){
		$("#num_attempts_count").val('');
	});
	$('#unlimited_attampts').click(function (){
		$("#num_attempts_count").val('');
	});
	$('#num_attempts_count').click( function (){
		$("#num_attempts").prop('checked', true);
	});
	$('#num_attempts').click( function (){
		$("#num_attempts_count").focus();
	});
	$("#num_attempts_count").blur( function (){
		if ( $("#num_attempts_count").val().replace(/ /g, "").length && (isNaN($("#num_attempts_count").val()) || $("#num_attempts_count").val() <= 1)  ){
			alert('You can only set as 2 or higher.\n\nPlease try again.');
			$("#num_attempts_count").val('');
			$("#one_attempt").prop('checked',true);
		}
	});

	/* Charge Tests */
	$('#do_charge_selector').change(function (){
		if ( $(this).is(':checked') == false ){
			$('#do_charge_div').hide();
			$('#charge_messsage_top').show();
		} else {
			$('#do_charge_div').show();
			$('#charge_messsage_top').hide();
		}
	});
	/* Give receipt */
	$('#give_receipt_id').change(function (){
		if ( $(this).is(':checked') == false ){
			$('#give_receipt_div').hide();
		} else {
			$('#give_receipt_div').show();
		}
	});

	/* completion review */
	$('#q_').change(function (){
		if ( $(this).is(':checked') == false){
			$('#qf_').removeAttr('checked');
			$('#qio_').removeAttr('checked');
			$('#qca_').removeAttr('checked');
		}
	});
	$('#qf_').change(function (){

		$('#q_').prop("checked", true);
	});
	$('#qio_').change(function (){
		$('#q_').prop("checked", true);
	});
	$('#qca_').change(function (){
		$('#q_').prop("checked", true);
	});

	/* instant review */
	$('#sfq_').change(function (){
		if ( $(this).is(':checked') == false){
			$('#sfqca_, #sfpdt_').removeAttr('checked');
		}
	});
	$('#sfqca_, #sfpdt_').change(function (){
		$('#sfq_').prop("checked", true);
	});

	/* mandatory answers */
	$('#ma_2').change(function (){
		if ( $(this).is(':checked') == false){
			$('#cc_2').removeAttr('checked');
		}
	});
	$('#cc_2').change(function (){
		if ( $(this).is(':checked') == true){
			$('#ma_2').prop("checked", true);
		}
	});


	$('#gq').change(function (){
		if ( $(this).is(':checked') == false){
			$('#sqpae_, #sca2_, #daqin_').removeAttr('checked');
		}
	});
	$('#sqpae_, #sca2_, #daqin_').change(function (){
		$('#gq').prop("checked", true);
	});



	/* change text and hide appropriate divs if passmark is set */
	$('#passmarkid').keyup( function(){

		if (passmark_is_set()){
			$('#pass_link_label').text('Pass link:');
			$('#pass_feedback_label').text('Test completed message: Show on pass');
			$('#fail_link_div').show();
			$('#fail_feedback_div').show();
		} else {
			$('#fail_link_div').hide();
			$('#fail_feedback_div').hide();
			$('#pass_link_label').text('Link');
			$('#pass_feedback_label').text('Test completed message');
		}
	});
	if (passmark_is_set()){
		$('#pass_link_label').text('Pass link');
		$('#pass_feedback_label').text('Test completed message: Show on pass');
		$('#fail_link_div').show();
		$('#fail_feedback_div').show();
	} else {
		$('#fail_link_div').hide();
		$('#fail_feedback_div').hide();
		$('#pass_link_label').text('Link');
		$('#pass_feedback_label').text('Test completed message');
	}
	$(document).on('change','#certificate',function(){

		/* Note: urlArray is declared in generic.overlay.js
		 * We need to set the correct urlArray index which is used in AJAX - not the HREF on this page
		 */

		/* IE7/6 etc will not include generic.overlay.js so urlArray reference will give error */
		if ($(this).val() != 0 && typeof urlArray != 'undefined'){

			urlArray[$('#edit_certificate_link').attr('data-index')] = webpath_admin+'tests/certificates/manage/?certificate_id='+$('#certificate').val()+'&show_layover';
			$('#edit_certificate_link').show();

		} else {
			$('#edit_certificate_link').hide();
		}
	});


	$(document).on('change','#webhook',function(){

		/* Note: urlArray is declared in generic.overlay.js
		 * We need to set the correct urlArray index which is used in AJAX - not the HREF on this page
		 */

		/* IE7/6 etc will not include generic.overlay.js so urlArray reference will give error */
		if ($(this).val() != 0 && typeof urlArray != 'undefined'){

			urlArray[$('#edit_webhook_link').attr('data-index')] = webpath_admin+'myaccount/webhooks/edit/?webhook_id='+$('#webhook').val()+'&show_layover';
			$('#edit_webhook_link').show();

		} else {
			$('#edit_webhook_link').hide();
		}
	});


 });



function passmark_is_set(){
	if (isNaN($('#passmarkid').val()) || $('#passmarkid').val()==0 || $('#passmarkid').val()==''){
		return false;
	} else if ($('#passmarkid').val() < 0 || $('#passmarkid').val() > 100){
		alert('Passmark must be between 0 and 100');
		$('#passmarkid').val('');
		return false;
	} else {
		return true;
	}
}


</script>
</div> 
<img src="{% static 'css_js/icon_loading_circleV3.gif' %}" alt="Hidden Loading Image" class="hide" width="20" height="20">
</div>


{% endblock %}